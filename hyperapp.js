!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.hyperapp=t.hyperapp||{})}(this,function(t){"use strict";var e=function(t,e){for(var n,r=[],a=[],o=arguments.length;o-- >2;)r[r.length]=arguments[o];for(;r.length;)if(Array.isArray(n=r.pop()))for(var o=n.length;o--;)r[r.length]=n[o];else null!=n&&!0!==n&&!1!==n&&("number"==typeof n&&(n+=""),a[a.length]=n);return"string"==typeof t?{tag:t,data:e||{},children:a}:t(e,a)},n=function(t){function e(t,n,i){Object.keys(n||[]).map(function(u){var f=n[u],c=i?i+"."+u:u;"function"==typeof f?t[u]=function(t){var e=f(v,g,r("action",{name:c,data:t}).data,r);if(null==e||"function"==typeof e.then)return e;a(v=o(v,r("update",e)),h)}:e(t[u]||(t[u]={}),f,c)})}function n(){a(v,h),r("loaded")}function r(t,e){return(y[t]||[]).map(function(t){var n=t(v,g,e,r);null!=n&&(e=n)}),e}function a(e,n){s=d(t.root||(t.root=document.body),s,p,p=r("render",n)(e,g))}function o(t,e){var n={};if("object"!=typeof e||Array.isArray(e))return e;for(var r in t)n[r]=t[r];for(var r in e)n[r]=e[r];return n}function i(t,e){if("string"==typeof t)var n=document.createTextNode(t);else{for(var n=(e=e||"svg"===t.tag)?document.createElementNS("http://www.w3.org/2000/svg",t.tag):document.createElement(t.tag),r=0;r<t.children.length;)n.appendChild(i(t.children[r++],e));for(var r in t.data)"oncreate"===r?t.data[r](n):u(n,r,t.data[r])}return n}function u(t,e,n,r){if("key"===e);else if("style"===e)for(var a in o(r,n=n||{}))t.style[a]=n[a]||"";else{try{t[e]=n}catch(t){}"function"!=typeof n&&(n?t.setAttribute(e,n):t.removeAttribute(e))}}function f(t,e,n){for(var r in o(e,n)){var a=n[r],i=e[r];"onupdate"===r?a(t):a===i&&a===t[r]||u(t,r,a,i)}}function c(t){if(t&&(t=t.data))return t.key}function l(t,e,n){function r(){t.removeChild(e)}(n.data&&n.data.onremove||r)(e,r)}function d(t,e,n,r){if(null==n)e=t.insertBefore(i(r),e);else if(r.tag&&r.tag===n.tag){f(e,n.data,r.data);for(var a=r.children.length,o=n.children.length,u={},p=[],s={},v=0;v<o;v++){var h=e.childNodes[v];p[v]=h;var g=n.children[v],y=c(g);null!=y&&(u[y]=[h,g])}for(var v=0,m=0;m<a;){var h=p[v],g=n.children[v],b=r.children[m],y=c(g);if(s[y])v++;else{var w=c(b),A=u[w]||[];null==w?(null==y&&(d(e,h,g,b),m++),v++):(y===w?(d(e,A[0],A[1],b),v++):A[0]?(e.insertBefore(A[0],h),d(e,A[0],A[1],b)):d(e,h,null,b),m++,s[w]=b)}}for(;v<o;){var g=n.children[v],y=c(g);null==y&&l(e,p[v],g),v++}for(var v in u){var A=u[v],k=A[1];s[k.data.key]||l(e,A[0],k)}}else if(r!==n){var v=e;t.replaceChild(e=i(r),v)}return e}for(var p,s,v={},h=t.view,g={},y={},m=-1,b=t.plugins||[];m<b.length;m++){var w=b[m]?b[m](t):t;null!=w.state&&(v=o(v,w.state)),e(g,w.actions),Object.keys(w.events||[]).map(function(t){y[t]=(y[t]||[]).concat(w.events[t])})}"l"!==document.readyState[0]?n():addEventListener("DOMContentLoaded",n)},r=function(t){function e(e){var n,r={};for(var a in t.view){var o=[];n||"*"===a||e.replace(RegExp("^"+a.replace(/\//g,"\\/").replace(/:([\w]+)/g,function(t,e){return o.push(e),"([-\\w]+)"})+"/?$","g"),function(){for(var t=1;t<arguments.length-2;)r[o.shift()]=arguments[t++];n=a})}return{match:n||"*",params:r}}return{state:{router:e(location.pathname)},actions:{router:{match:function(t,n,r,a){return{router:a("route",e(r))}},go:function(t,e,n){history.pushState({},"",n),e.router.match(n.split("?")[0])}}},events:{loaded:function(t,e){function n(){e.router.match(location.pathname)}n(),addEventListener("popstate",n)},render:function(t,e,n){return n[t.router.match]}}}};t.h=e,t.app=n,t.Router=r});
//# sourceMappingURL=hyperapp.js.map
